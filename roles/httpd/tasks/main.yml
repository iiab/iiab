# 2020-01-23 TO DO / Questions:
# - Validate input vars apache_install & apache_enabled here.
#   - Use as nec, with 'when: apache_installed is undefined'
# - Encapsulate all 3 tasks below into httpd/roles/install.yml ?
# - Similarly sanity-check httpd/roles/enable.yml...
#   - Verify that 9-local-addons/tasks/main.yml's invocation of
#     roles/httpd/tasks/enable.yml (via roles/httpd-enable/tasks/main.yml, if
#     apache_enabled is True) does the right thing!
#   - And that we really don't want to invoke it hereunder?
# - Save relevant apache_* vars to /etc/iiab/iiab.ini

#- include_tasks: install.yml
- include_tasks: html.yml

- name: Create /library/www/html/info directory for http://box/info offline docs
  file:
    path: "{{ doc_root }}/info"
    owner: "{{ apache_user }}"
    group: "{{ apache_user }}"
    mode: '0755'
    state: directory

- name: Install /usr/bin/iiab-refresh-wiki-docs (scraper script) to create http://box/info offline documentation.  (Script can be run manually and/or at the end of Stage 4 = roles/4-server-options/tasks/main.yml)
  template:
    src: refresh-wiki-docs.sh
    dest: /usr/bin/iiab-refresh-wiki-docs
    mode: '0755'
