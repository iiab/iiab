- name: Create static search root directory
  file:
    path: "{{ maps_static_search_root }}"
    state: directory

- name: Install static search js
  copy:
    src: static_search.js
    dest: "{{ maps_static_search_root }}/static_search.js"
    mode: "0644"

- name: Download static search database
  include_tasks: download_large_file.yml
  vars:
    dest_base_path: "{{ maps_static_search_root }}"
    item: "{{ static_search_data[maps_search_static_db] }}"
    is_archive: true

- name: Select static database
  file:
    src: "{{ maps_static_search_root }}/{{ static_search_data[maps_search_static_db] }}"
    dest: "{{ maps_static_search_root }}/{{ static_search_symlink_name }}"
    state: link
    force: yes
