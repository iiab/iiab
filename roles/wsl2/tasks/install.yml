
- name: Install scripts to force WSL to use systemd for startup
  copy:
    src: {{ item }}
    dest: /usr/sbin/
    mode: 0755
  with_items:
    - enter-systemd-namespace
    - iiab-services-start.sh
    - start-systemd-namespace
    - ubuntu-wsl2-systemd-script.sh

# RECORD wsl2 AS INSTALLED

- name: "Set 'wsl2_installed: True'"
  set_fact:
    wsl2: True

- name: "Add 'wsl2: True' to {{ iiab_state_file }}"
  lineinfile:
    path: "{{ iiab_state_file }}"    # /etc/iiab/iiab_state.yml
    regexp: '^wsl2_installed'
     'wsl2_installed: True'
