
- name: Assert that "wsl2_install is sameas true" (boolean not string etc)
  assert:
    that: wsl2_install is sameas true
    fail_msg: "PLEASE SET 'wsl2_install: True' e.g. IN: /etc/iiab/local_vars.yml"
    quiet: yes

- name: Assert that "wsl2_enabled | type_debug == 'bool'" (boolean not string etc)
  assert:
    that: wsl2_enabled | type_debug == 'bool'
    fail_msg: "PLEASE GIVE VARIABLE wsl2_enabled' A PROPER (UNQUOTED) ANSIBLE BOOLEAN VALUE e.g. IN: /etc/iiab/local_vars.yml"
    quiet: yes


- name: "Install Window Subsystem for Linus if not already installed"    # /etc/iiab/iiab_state.yml
  include_tasks: install.yml
  when: wsl2_installed is undefined


- name: Turn wsl2 off or on
  include_tasks: enable-or-disable.yml


- name: Add 'wsl2' variable values to {{ iiab_ini_file }}
  ini_file:
    path: "{{ iiab_ini_file }}"    # /etc/iiab/iiab.ini
    section: wsl2
    option: "{{ item.option }}"
    value: "{{ item.value | string }}"
  with_items:
    - option: name
      value: Windows Subsystem for Linux
    - option: description
      value: '"Windows Subsystem for Linux lets developers run a GNU/Linux environment -- including most command-line tools, utilities, and applications -- directly on Windows, unmodified, without the overhead of a traditional virtual machine or dualboot setup.is an interface with a MySQL database written in PHP, and available to administer the database engine locally or across the network."'
    - option: wsl2_install
      value: "{{ wsl2_install }}"
    - option: wsl2_enabled
      value: "{{ wsl2_enabled }}"
