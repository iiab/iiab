- name: Cham - Remove link to public recordings directory
  file:
    path: "{{ doc_root }}/local_content/{{ recordings_dir }}"
    state: absent

- name: Cham - nginx config - delete http context declarations
  file:
    path: "{{ nginx_config_dir }}/cham.conf"
    state: absent

- name: Cham - nginx config - delete nginx rtmp webserver configuration file
  file:
    path: "{{ nginx_config_dir }}/../rtmp.conf"
    state: absent

- name: Cham - nginx config - Disable nginx rtmp webserver configuration file
  lineinfile: 
    path: "{{ nginx_config_dir }}/../nginx.conf"
    line: "include {{ nginx_config_dir }}/../rtmp.conf"
    state: absent 

- name: Cham - nginx conf - Remove nginx cross-domain config
  file:
    path: "{{ doc_root }}/crossdomain.xml"
    state: absent

- name: Cham - nginx conf - Remove rtmp stat.xsl
  file:
    path: "{{ doc_root }}/{{ cham_html_dir }}/stat.xsl"
    state: absent

- name: Cham - Remove cham html root directory
  path: 
    dest: "{{ doc_root }}/{{ cham_html_dir }}/"
    state: absent

- name: Cham - Restart nginx
  systemd:
    name: nginx
    state: restarted
