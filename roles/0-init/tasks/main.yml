# Initialize

- name: ...IS BEGINNING ============================================
  include_vars: roles/0-init/defaults/main.yml

- name: Determine if installer was run
  stat: path=/etc/iiab/iiab.env
  register: NewInstall

- name: Setting first run flag
  set_fact:
    first_run: True
  when: not NewInstall.stat.exists

# we need to inialize the ini file and only write the location and version sections once and only
# once to preserve the install date and git hash.
- name: Write iiab_ini.yml for the first time
  include_tasks: roles/1-prep/tasks/iiab_ini.yml
  when: first_run

- name: Loading computed_vars
  include_tasks: roles/0-init/tasks/computed_vars.yml
