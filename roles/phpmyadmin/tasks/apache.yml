- name: Install /etc/{{ apache_config_dir }}/phpmyadmin.conf from template, if phpmyadmin_enabled
  template:
    src: phpmyadmin.j2
    dest: "/etc/{{ apache_config_dir }}/phpmyadmin.conf"
  when: phpmyadmin_enabled

- name: Create symlink phpmyadmin.conf from sites-enabled to sites-available (debuntu)
  file:
    src: /etc/apache2/sites-available/phpmyadmin.conf
    path: /etc/apache2/sites-enabled/phpmyadmin.conf
    state: link
  when: phpmyadmin_enabled

- name: Remove /etc/apache2/sites-enabled/phpmyadmin.conf, if not phpmyadmin_enabled (debuntu)
  file:
    path: /etc/apache2/sites-enabled/phpmyadmin.conf
    state: absent
  when: not phpmyadmin_enabled
