---
- name: systemd daemon-reload
  systemd:
    daemon_reload: true

- name: Enable & Start Samba service ({{ smb_service }}) and NetBIOS name service ({{ nmb_service }}) if samba_enabled
  systemd:
    name: "{{ item }}"
    state: started
    enabled: true
  when: samba_enabled
  with_items:
    - "{{ smb_service }}"
    - "{{ nmb_service }}"

- name: Disable & Stop Samba service ({{ smb_service }}) and NetBIOS name service ({{ nmb_service }}) if not samba_enabled
  systemd:
    name: "{{ item }}"
    state: stopped
    enabled: false
  when: not samba_enabled
  with_items:
    - "{{ smb_service }}"
    - "{{ nmb_service }}"
