# administer this service by browsing to localhost:631
- name: Install 'cups' package
  package:
    name: cups
    state: present
  when: cups_install | bool
  #tags: download

- name: Install our own /etc/cups/cupsd.conf from template, to permit local LAN admin
  template:
    src: cupsd.conf
    dest: /etc/cups/cupsd.conf

- name: Install /etc/{{ apache_config_dir }}/cups.conf from template
  template:
    src: cups.conf
    dest: "/etc/{{ apache_config_dir }}/"

- name: "Add 'cups_installed: True' to {{ iiab_state_file }}"
  lineinfile:
    dest: "{{ iiab_state_file }}"    # /etc/iiab/iiab_state.yml
    regexp: '^cups_installed'
    line: 'cups_installed: True'
